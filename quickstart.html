

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; hespi 0.5.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8e576371"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pipeline" href="pipeline.html" />
    <link rel="prev" title="Hespi" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            hespi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#training-with-custom-data">Training with custom data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="reproduce.html">Reproducing Test Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="training.html">Training With Custom Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hespi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading"></a></h1>
<p>Hespi takes images of specimen sheets from herbaria and first detects the various components of the sheet.</p>
<img alt="Hespi pipeline" class="align-center" src="https://raw.githubusercontent.com/rbturnbull/hespi/main/docs/images/HespiDiagram.jpg" />
<p>Hespi first takes a specimen sheet and detects the various components of it using the Sheet-Component Model.
Then any full database label detected is cropped and this is given to the Label-Field Model
which detects different textual fields written on the label.
A Label Classifier is also used to determine the type of text written on the label.
If it is printed or typewritten, then the text of each field is given to an Optical Character Recognition (OCR) engine
and if there is handwriting, then each field is given to the Handwritten Text Recognition (HTR) engine.
The recognized text is then corrected using a multimodal Large Language Model (LLM).
Finally, the result of the fields is post-processed before being written into
an HTML report, a CSV file and text files.</p>
<p>The stages of the pipeline are explained in the <a class="reference external" href="https://rbturnbull.github.io/hespi/pipeline.html">documentation for the pipeline</a>.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>Install hespi using pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>hespi
</pre></div>
</div>
<p>The first time it runs, it will download the required model weights from the internet.</p>
<p>It is recommended that you also install <a class="reference external" href="https://tesseract-ocr.github.io/tessdoc/Home.html">Tesseract</a> so that this can be used in the text recognition part of the pipeline.</p>
<p>To install the development version, see the <a class="reference external" href="https://rbturnbull.github.io/hespi/contributing.html">documentation for contributing</a>.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>To run the pipeline, use the executable <code class="docutils literal notranslate"><span class="pre">hespi</span></code> and give it any number of images:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hespi<span class="w"> </span>image1.jpg<span class="w"> </span>image2.jpg
</pre></div>
</div>
<p>By default the output will go to a directory called <code class="docutils literal notranslate"><span class="pre">hespi-output</span></code>.
You can set the output directory with the command with the <code class="docutils literal notranslate"><span class="pre">--output-dir</span></code> argument:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hespi<span class="w"> </span>images/*.tif<span class="w"> </span>--output-dir<span class="w"> </span>./hespi-output
</pre></div>
</div>
<p>The detected components and text fields will be cropped and stored in the output directory.
There will also be a CSV file with the filename <code class="docutils literal notranslate"><span class="pre">hespi-results.csv</span></code> in the output directory with the text recognition results for any institutional labels found.</p>
<p>By default <code class="docutils literal notranslate"><span class="pre">hespi</span></code> will use OpenAI’s <code class="docutils literal notranslate"><span class="pre">gpt-4o</span></code> large language model (LLM) in the pipeline to produce the final results.
If you wish to use a different model from OpenAI or Anthropic, add it on the command-line like this: <code class="docutils literal notranslate"><span class="pre">--llm</span> <span class="pre">MODEL_NAME</span></code>
You will need to include an API key for the LLM. This can be <code class="docutils literal notranslate"><span class="pre">OPENAI_API_KEY</span></code> for an OpenAI LLM or <code class="docutils literal notranslate"><span class="pre">ANTHROPIC_API_KEY</span></code> for Anthropic.
You can also pass the API key to hespi with the <code class="docutils literal notranslate"><span class="pre">--llm-api-key</span> <span class="pre">API_KEY</span></code> argument.</p>
<p>More information on the command line arguments can be found in the <a class="reference external" href="https://rbturnbull.github.io/hespi/cli.html">Command Line Reference</a> in the documentation.</p>
<p>There is another command line utility called <code class="docutils literal notranslate"><span class="pre">hespi-tools</span></code> which provides additional functionality.
See the <a class="reference external" href="https://rbturnbull.github.io/hespi/cli.html#hespi-tools">documentation</a> for more information.</p>
</section>
<section id="training-with-custom-data">
<h2>Training with custom data<a class="headerlink" href="#training-with-custom-data" title="Link to this heading"></a></h2>
<p>To train the model with custom data, see the documention.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Hespi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.html" class="btn btn-neutral float-right" title="Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022–2024, Melbourne Data Analytics Platform.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>